# ----------------------------------------------------------------------------
addons:
  apt:
    packages:
      # ----------------------------------------------------------------------
      # Package list from http://bazel.io/docs/install.html.
      - g++
      - openjdk-8-jdk
      - pkg-config
      - zip
      - zlib1g-dev

# ----------------------------------------------------------------------------
# Commands to prepare the system to install prerequisites or dependencies:
before_install:
  - export PROJECT_DIR=$(pwd)

# ----------------------------------------------------------------------------
# Cemmands to install dependencies necessary to build / run the project:
install:
  # --------------------------------------------------------------------------
  # Install Bazel.
  - BAZEL_VERSION=0.2.2b
  - BAZEL_INSTALLER=bazel-${BAZEL_VERSION}-installer-linux-x86_64.sh
  - cd $HOME
  - wget https://github.com/bazelbuild/bazel/releases/download/${BAZEL_VERSION}/${BAZEL_INSTALLER}
  - chmod +x $BAZEL_INSTALLER
  - ./$BAZEL_INSTALLER --user
  # Add Bazel to the path.
  - export PATH="$PATH:$HOME/bin"

# ----------------------------------------------------------------------------
# Commands to prepare the project for testing:
before_script:
  # Go back to the project directory.
  - cd $PROJECT_DIR

# ----------------------------------------------------------------------------
# Commands to run tests:
script:
   - bazel test //...

