# ----------------------------------------------------------------------------
addons:
  apt:
    packages:
      - wget
      # ----------------------------------------------------------------------
      # Package list from http://bazel.io/docs/install.html.
      - g++
      - oracle-java8-installer
      - pkg-config
      - zip
      - zlib1g-dev

# ----------------------------------------------------------------------------
# Commands to prepare the system to install prerequisites or dependencies:
before_install:
  - set +x
  - export PROJECT_DIR=$(pwd)

# ----------------------------------------------------------------------------
# Cemmands to install dependencies necessary to build / test the project:
install:
  - cd $HOME
  # Install Bazel.
  - BAZEL_VERSION=0.2.2b
  - BAZEL_INSTALLER=bazel-${BAZEL_VERSION}-installer-linux-x86_64.sh
  - wget https://github.com/bazelbuild/bazel/releases/download/${BAZEL_VERSION}/${BAZEL_INSTALLER}
  - chmod +x $BAZEL_INSTALLER
  - JAVA_HOME=/usr/lib/jvm/java-8-oracle ./$BAZEL_INSTALLER --user
  # Add Bazel to the path.
  - export PATH="$PATH:$HOME/bin"

# ----------------------------------------------------------------------------
# Commands to prepare the project for testing:
before_script:
  - cd $PROJECT_DIR

# ----------------------------------------------------------------------------
# Commands to run tests:
script:
   - bazel test //...

